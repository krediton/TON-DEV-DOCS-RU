---
title: Обзор
---



# Язык Tolk: обзор

**Tolk** - это новый язык для написания смарт контрактов в TON. Подумайте о Tolk как о "**новом поколении FunC**".
Компилятор Tolk буквально является форком компилятора FunC, представляя знакомый синтаксис, похожий на TypeScript,
но оставляя все низкоуровневые оптимизаторы нетронутыми.

```tolk
import "storage.tolk"

fun loadData() {
    ctxCounter = getContractData().beginParse().loadUint(32);
}

fun onInternalMessage(msgValue: int, msgFull: cell, msgBody: slice) {
    var cs = msgFull.beginParse();
    var flags = cs.loadMessageFlags();
    if (isMessageBounced(flags)) {
        return;
    }
    ...
}

get currentCounter(): int {
    loadData(); // fills global variables
    return ctxCounter;
}
```

<details>
  <summary><b>Смотрите ту же логику, реализованную на FunC</b></summary>

```func
#include "storage.fc";

() load_data() impure {
  slice cs = get_data().begin_parse();
  ctx_counter = cs~load_uint(32);
}

() recv_internal(int msg_value, cell msg_full, slice msg_body) impure {
  slice cs = msg_full.begin_parse();
  int flags = cs.load_uint(4);
  if (flags & 1) {
    return ();
  }
  ...
}

int currentCounter() method_id {
  load_data(); ;; fills global variables
  return ctx_counter;
}
```

</details>

Попробуйте FunC → Tolk конвертерПрочитайте "Tolk vs FunC различия"

<div style={{height: '2em'}}></div>

## Мотивация создания Tolk

FunC - потрясающий.
Это действительно низкий уровень и побуждает программиста думать о внутреннем компиляторе.
Он обеспечивает полный контроль над ассемблером TVM, позволяя программисту сделать его контракт максимально эффективным.
Если вы привыкли к нему, то любите его.

Однако есть проблема.
FunC это "функциональный C", и это для ниндзя.
Если вам интересен Lisp и Haskell, вы будете счастливы.
Но если вы являетесь разработчиком JavaScript / Go / Kotlin, то FunC синтаксис будет не свойственен для вас, что приводит к случайным ошибкам.
Борьба с синтаксисом может снизить вашу мотивацию ко входу в ТОН.

Представьте, что если бы был язык, такой же умный, такой же низкоуровневый, но не функциональный и не похожий на C?
Оставляя всю красоту и сложность внутри, что если бы на первый взгляд был более похож на популярные языки?

Вот в чем суть Tolk.

## Переход с FunC на Tolk

Если вы знаете FunC и хотите попробовать новый синтаксис, ваш способ:

1. Прочтите [Tolk vs FunC: коротко](in-short.md).
2. С помощью Blueprint создайте новый контракт Tolk (например, счетчик) и экспериментируйте с ним. Помните, что почти все stdlib функции переименованы в ~~подробные~~ понятные имена. Вот [сопоставление](/v3/documentation/smart-contracts/tolk/tolk-vs-func/stdlib).
3. Попробуйте [конвертер](https://github.com/ton-blockchain/convert-func-to-tolk) для ваших существующих контрактов или один из [примеров FunC Contracts](/v3/documentation/smart-contracts/contracts-specs/examples). Имейте в виду, что контракты, написанные на Tolk, с нуля будут выглядеть лучше, чем автоматическая конвертация. Например, использование логических операторов вместо побитового значительно увеличивает читабельность кода.

## Как попробовать Tolk, если вы не знаете FunC

:::tip В настоящее время эта документация предполагает, что вы знаете FunC
Документация описывает "Tolk vs FunC" различия.
Позднее она будет адаптирована и для новичков. Более того, FunC в конечном итоге станет устаревшим,
и все фрагменты кода во всей документации будут переписаны на Tolk.
:::

Если вы новичок в TON, ваш путь:

1. Покопаться в [этой документации](/v3/documentation/smart-contracts/overview) для получения базовых знаний о разработке в TON. Независимо от того, какой язык вы будете использовать, вам нужно знать о ячейках, слайсах, асинхронной природе TON.
2. Сталкиваясь с фрагментами FunC вы можете использовать FunC или использовать их в Tolk. Если синтаксис FunC кажется вам необычным, не волнуйтесь: цель Tolk — как раз исправить эту проблему.
3. Как только вы поймете, что происходит, попробуйте использовать Tolk с помощью [blueprint](https://github.com/ton-org/blueprint).

## Инструменты окружения Tolk

Исходники компилятора Tolk являются частью `ton-blockchain` [repo](https://github.com/ton-blockchain/ton).
Помимо компилятора, у нас есть:

1. [tolk-js](https://github.com/ton-blockchain/tolk-js) — обертка WASM для компилятора Tolk.
2. [Плагин JetBrains IDE](https://github.com/ton-blockchain/Intellij-ton) поддерживает Tolk помимо FunC, Fift, TL/B и Tact.
3. [VS Code Extension](https://github.com/ton-blockchain/tolk-vscode) включает поддержку Tolk Language.
4. [Конвертер из FunC в Tolk](https://github.com/ton-blockchain/convert-func-to-tolk) — конвертация файла `.fc` в файл `.tolk` с одной командой `npx`.
5. Язык Tolk доступен в [blueprint](https://github.com/ton-org/blueprint).

## Готов ли Tolk для использования?

Компилятор Tolk, ветка компилятора FunC, в данный момент считается production-готовым, хотя и экспериментальным.

Необнаруженные ошибки могут существовать, потенциально унаследоваться от FunC или быть отнесены к характеристикам TVM.
В любом случае независимо от того, на каком языке вы будете писать, вы должны покрывать ваши контракты тестами для достижения высокой надежности.

## Дорожная Карта

Первая выпущенная версия Толка v0.6, подчеркивающая [отсутствие](/v3/documentation/smart-contracts/tolk/changelog#how-tolk-born) FunC v0.5.

Вот некоторые (но не все и не упорядоченные каким-либо образом) пункты, которые следует изучить:

- улучшения системы типов: тип boolean, nullability, словари
- структуры, с автоматической упаковкой из/в ячейки, возможно интегрированы с обработчиками сообщений
- структуры с методами, вероятно, обобщенными для охвата встроенных типов
- некоторые интеграции с TL схемой, либо синтаксической, либо с помощью генерации кода
- легко читаемые (понятные) ошибки выдаваемые компилятором
- более простая отправка сообщений
- лучший опыт для общих случаев использования (jettons, nft и т. д.)
- оптимизация газа и стека, встроенный AST
- расширение и поддержание stdlib
- подумайте о некотором виде ABI (как исследователи "видеть" байт-код)
- подумайте об управлении газом и управлении в целом

Следует отметить, что большая часть вышеупомянутых моментов представляет собой сложную задачу.
Сначала ядро ​​FunC должно быть полностью переработано, чтобы «скрещиваться» с возможностями, для которых оно не было предназначено.

Кроме того, я считаю, что эволюция Tolk частично направляется потребностями сообщества.
Было бы неплохо поговорить с разработчиками, которые создали взаимосвязанные контракты FunC, чтобы понять их болевые точки и обсудить, как можно сделать что-то по-другому.

## Вопросы и контакты

Если у вас возникли проблемы, свяжитесь с обществом разработчиков [TON Dev Chats](https://t.me/addlist/1r5Vcb8eljk5Yzcy) или создайте issue GitHub.
